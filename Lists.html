<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>Lists: ç»“æ„åŒ–çš„æ•°æ®</title>
<script type="text/javascript" src="jquery-1.8.3.js"></script>
<script type="text/javascript" src="main.js"></script>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Lists<span class="subtitle">ç»“æ„åŒ–çš„æ•°æ®</span></h1>

<div class="code code-tight">
</div>

<div class="doc">

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <span class="id" type="keyword">Induction</span>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <span class="id" type="var">NatList</span>.<br/>
</div>

<div class="doc">
<a name="lab59"></a><h1 class="section">äºŒå…ƒç»„</h1>

<div class="paragraph"> </div>

 åœ¨å½’çº³ç±»å‹å®šä¹‰ä¸­ï¼Œæ¯ä¸ªæ„é€ å™¨ï¼ˆConstructorï¼‰å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå‚æ•°â€”â€”å¯ä»¥æ²¡æœ‰ï¼ˆå°±åƒtrueå’ŒOï¼‰ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªï¼ˆå°±åƒSï¼‰ï¼Œä¹Ÿå¯ä»¥æ›´å¤šï¼Œå°±åƒæ¥ä¸‹æ¥é‚£ä¸ªå®šä¹‰ï¼š 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natprod</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">pair</span> : <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">natprod</span>.<br/>

<br/>
</div>

<div class="doc">
è¿™ä¸ªå®šä¹‰å¯ä»¥è¢«ç†è§£ä½œï¼š"åªæœ‰ä¸€ç§æ–¹å¼æ¥æ„é€ ä¸€ä¸ªäºŒå…ƒç»„ï¼šé€šè¿‡æŠŠpairè¿™ä¸ªæ„é€ å™¨åº”ç”¨åˆ°ä¸¤ä¸ªnatç±»å‹çš„å‚æ•°ä¸Š" 
<div class="paragraph"> </div>

 æˆ‘ä»¬èƒ½å¤Ÿåƒä¸‹é¢è¿™æ ·æ„é€ ä¸€ä¸ªäºŒå…ƒç»„ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Check</span> (<span class="id" type="var">pair</span> 3 5).<br/>

<br/>
</div>

<div class="doc">
<a name="lab60"></a><h3 class="section"> </h3>

<div class="paragraph"> </div>

 ä¸‹é¢æ˜¯ä¸¤ä¸ªç®€å•çš„å‡½æ•°å®šä¹‰ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«ä»ä¸€ä¸ªäºŒå…ƒç»„ä¸­æŠ½å–ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªåˆ†é‡ã€‚
    ï¼ˆè¿™ä¸ªå®šä¹‰åŒæ—¶ä¹Ÿå±•ç¤ºäº†å¦‚ä½•å¯¹ä¸€ä¸ªä¸¤ä¸ªå‚æ•°çš„æ„é€ å™¨è¿›è¡Œæ¨¡å¼åŒ¹é…) 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">fst</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> â‡’ <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">snd</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> â‡’ <span class="id" type="var">y</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Eval</span> <span class="id" type="tactic">compute</span> <span class="id" type="keyword">in</span> (<span class="id" type="var">fst</span> (<span class="id" type="var">pair</span> 3 5)).<br/>
<span class="comment">(*&nbsp;===&gt;&nbsp;3&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a name="lab61"></a><h3 class="section"> </h3>

<div class="paragraph"> </div>

 å› ä¸ºäºŒå…ƒç»„ç»å¸¸è¢«ç”¨åˆ°ï¼Œæ‰€ä»¥å¦‚æœèƒ½æœ‰æ•°å­¦è®°å· (x,y) æ¥ä»£æ›¿ pair x y æ˜¯éå¸¸å¥½çš„ã€‚
    æˆ‘ä»¬å¯ä»¥é€šè¿‡å£°æ˜ä¸€ä¸ªNotationè®©Coqæ¥å—è¿™ç§è®°å·ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> "( x , y )" := (<span class="id" type="var">pair</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>).<br/>

<br/>
</div>

<div class="doc">
è¿™ä¸ªæ–°çš„è®°å·æ—¢èƒ½è¢«ç”¨åœ¨è¡¨è¾¾å¼ä¹Ÿèƒ½è¢«ç”¨åœ¨æ¨¡å¼åŒ¹é…ä¸­ã€‚ï¼ˆå®é™…ä¸Šï¼Œåœ¨ä¸Šä¸€ç« ä¸­æˆ‘ä»¬å·²ç»ä½¿ç”¨è¿‡äº†â€”â€”è¿™ä¸ªè®°å·åœ¨æ ‡å‡†åº“ä¸­ä¹Ÿå·²ç»è¢«æä¾›äº†) 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Eval</span> <span class="id" type="tactic">compute</span> <span class="id" type="keyword">in</span> (<span class="id" type="var">fst</span> (3,5)).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">fst'</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) â‡’ <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">snd'</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) â‡’ <span class="id" type="var">y</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">swap_pair</span> (<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>) : <span class="id" type="var">natprod</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (<span class="id" type="var">x</span>,<span class="id" type="var">y</span>) â‡’ (<span class="id" type="var">y</span>,<span class="id" type="var">x</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab62"></a><h3 class="section"> </h3>

<div class="paragraph"> </div>

 æˆ‘ä»¬ç°åœ¨æ¥è¯æ˜ä¸€äº›æœ‰å…³äºŒå…ƒç»„çš„ç®€å•çš„äº‹å®ã€‚å¦‚æœæˆ‘ä»¬ä»¥ä¸€ç§ç‰¹å®šçš„ï¼ˆç¨å¾®æœ‰ç‚¹å¤æ€ªï¼‰çš„æ–¹å¼æ¥
    ä¹¦å†™æˆ‘ä»¬çš„å¼•ç†ï¼Œä»…ä»…é€šè¿‡ <span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span>ï¼ˆè¿˜æœ‰å®ƒè‡ªå¸¦çš„ç®€åŒ–ï¼‰æˆ‘ä»¬å°±èƒ½å®Œæˆè¯æ˜ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">surjective_pairing'</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">n</span> <span class="id" type="var">m</span> : <span class="id" type="var">nat</span>),<br/>
&nbsp;&nbsp;(<span class="id" type="var">n</span>,<span class="id" type="var">m</span>) = (<span class="id" type="var">fst</span> (<span class="id" type="var">n</span>,<span class="id" type="var">m</span>), <span class="id" type="var">snd</span> (<span class="id" type="var">n</span>,<span class="id" type="var">m</span>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
æ³¨æ„ï¼Œä½†å¦‚æœæˆ‘ä»¬ç”¨ä¸€ç§è‡ªç„¶çš„æ–¹å¼æ¥ä¹¦å†™è¿™æ¡å¼•ç†çš„è¯ï¼Œä»…ä»…ä½¿ç”¨<span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span>æ¥è¯æ˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">surjective_pairing_stuck</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">p</span> = (<span class="id" type="var">fst</span> <span class="id" type="var">p</span>, <span class="id" type="var">snd</span> <span class="id" type="var">p</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="comment">(*&nbsp;Doesn't&nbsp;reduce&nbsp;anything!&nbsp;*)</span><br/>
<span class="id" type="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h3 class="section"> </h3>
 æˆ‘ä»¬å¿…é¡»è¦åƒCoqå±•ç¤º<span class="inlinecode"><span class="id" type="var">p</span></span>çš„å…·ä½“ç»“æ„ï¼Œè¿™æ ·<span class="inlinecode"><span class="id" type="tactic">simpl</span></span>æ‰èƒ½å¯¹<span class="inlinecode"><span class="id" type="var">fst</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">snd</span></span>åšæ¨¡å¼åŒ¹é…ã€‚ 
    é€šè¿‡destructå¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åƒè‡ªç„¶æ•°ï¼Œdestructä¸ä¼šç”Ÿæˆä¸€ä¸ªé¢å¤–çš„å­ç›®æ ‡ï¼Œå› ä¸ºä¸€å…±åªæœ‰ä¸€ç§æ–¹å¼å¯ä»¥æ„é€ äºŒå…ƒç»„ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">surjective_pairing</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">p</span> = (<span class="id" type="var">fst</span> <span class="id" type="var">p</span>, <span class="id" type="var">snd</span> <span class="id" type="var">p</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">p</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">p</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">m</span>]. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab64"></a><h4 class="section">Exercise: 1 star (snd_fst_is_swap)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">snd_fst_is_swap</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;(<span class="id" type="var">snd</span> <span class="id" type="var">p</span>, <span class="id" type="var">fst</span> <span class="id" type="var">p</span>) = <span class="id" type="var">swap_pair</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab65"></a><h4 class="section">Exercise: 1 star, optional (fst_swap_is_snd)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">fst_swap_is_snd</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">p</span> : <span class="id" type="var">natprod</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">fst</span> (<span class="id" type="var">swap_pair</span> <span class="id" type="var">p</span>) = <span class="id" type="var">snd</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab66"></a><h1 class="section">æ•°çš„åˆ—è¡¨</h1>

<div class="paragraph"> </div>

 é€šè¿‡ç¨ç¨æ¨å¹¿ä¸€ä¸‹æˆ‘ä»¬å¯¹äºŒå…ƒç»„çš„å®šä¹‰ï¼Œæˆ‘ä»¬åƒå¯ä»¥è¿™æ ·æè¿°åˆ—è¡¨ï¼š"ä¸€ä¸ªåˆ—è¡¨è¦ä¹ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆå°±åº”è¯¥æ˜¯ä¸€ä¸ªç”±ä¸€ä¸ªæ•°å’Œå¦ä¸€ä¸ªåˆ—è¡¨ç»„æˆçš„äºŒå…ƒç»„"ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natlist</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> : <span class="id" type="var">natlist</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">cons</span> : <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">natlist</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">natlist</span>.<br/>

<br/>
</div>

<div class="doc">
ä¾‹å¦‚ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæœ‰ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist</span> := <span class="id" type="var">cons</span> 1 (<span class="id" type="var">cons</span> 2 (<span class="id" type="var">cons</span> 3 <span class="id" type="var">nil</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab67"></a><h3 class="section"> </h3>
 å°±åƒäºŒå…ƒç»„ä¸€æ ·ï¼Œç”¨æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰çš„ç¼–ç¨‹çš„è®°å·æ¥å†™ä¸‹ä¸€ä¸ªåˆ—è¡¨ä¼šæ˜¾å¾—æ›´ä¸ºæ–¹ä¾¿ã€‚ä¸‹é¢ä¸¤ä¸ªå£°æ˜è®©æˆ‘ä»¬å¯ä»¥ç”¨<span class="inlinecode">::</span>æ¥ä½œä¸­ç¼€consæ“ä½œç¬¦ï¼Œç”¨æ–¹æ‹¬å·æ¥åš<span class="inlinecode"><span class="id" type="var">å</span>¤–<span class="id" type="var">ç</span>¼€</span>ç¬¦å·æ¥æ„é€ åˆ—è¡¨ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> "x :: l" := (<span class="id" type="var">cons</span> <span class="id" type="var">x</span> <span class="id" type="var">l</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60, <span class="id" type="var">right</span> <span class="id" type="var">associativity</span>).<br/>
<span class="id" type="keyword">Notation</span> "[ ]" := <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Notation</span> "[ x ; .. ; y ]" := (<span class="id" type="var">cons</span> <span class="id" type="var">x</span> .. (<span class="id" type="var">cons</span> <span class="id" type="var">y</span> <span class="id" type="var">nil</span>) ..).<br/>

<br/>
</div>

<div class="doc">
å®Œå…¨ç†è§£è¿™äº›å£°æ˜æ˜¯ä¸å¿…è¦çš„ï¼Œä½†æ˜¯å‡ä½¿ä½ æ„Ÿå…´è¶£çš„è¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šç²—ç•¥åœ°ä»‹ç»åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚
    right associativity å‘Šè¯‰ Coq å½“é‡åˆ°å¤šä¸ªç¬¦å·æ—¶æ€ä¹ˆç»™è¡¨è¾¾å¼åŠ æ‹¬å·ã€‚å¦‚æ­¤ä¸€æ¥ä¸‹é¢ä¸‰ä¸ª
    å£°æ˜åšçš„å°±æ˜¯åŒä¸€ä»¶äº‹ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist1</span> := 1 :: (2 :: (3 :: <span class="id" type="var">nil</span>)).<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist2</span> := 1 :: 2 :: 3 :: <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">mylist3</span> := [1;2;3].<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="tactic">at</span></span> <span class="inlinecode"><span class="id" type="var">level</span></span> <span class="inlinecode">60</span>è¿™éƒ¨åˆ†å‘Šè¯‰Coqå½“é‡åˆ°è¡¨è¾¾å¼è¿˜æœ‰å…¶ä»–ä¸­ç¼€ç¬¦å·çš„æ—¶åº”è¯¥å¦‚ä½•åŠ æ‹¬å·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ
    æˆ‘ä»¬å·²ç»å®šä¹‰äº† <span class="inlinecode">+</span> ä½œä¸º <span class="inlinecode"><span class="id" type="var">plus</span></span> çš„ä¸­ç¼€ç¬¦å·ï¼Œå®ƒçš„levelæ˜¯50ã€‚
Notation "x + y" := (plus x y)  
                    (at level 50, left associativity).
    <span class="inlinecode">+</span> å°†ä¼šæ¯” <span class="inlinecode">::</span> ç»“åˆçš„æ›´ç´§ï¼Œæ‰€ä»¥ <span class="inlinecode">1</span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode">::</span> <span class="inlinecode">[3]</span> ä¼šè¢«è§£ææˆ <span class="inlinecode">(1</span> <span class="inlinecode">+</span> <span class="inlinecode">2)</span> <span class="inlinecode">::</span> <span class="inlinecode">[3]</span>ï¼Œå°±å’Œæˆ‘ä»¬æœŸæœ›çš„ä¸€æ ·ï¼Œè€Œä¸æ˜¯ <span class="inlinecode">1</span> <span class="inlinecode">+</span> <span class="inlinecode">(2</span> <span class="inlinecode">::</span> <span class="inlinecode">[3])<span class="id" type="var">ã</span>€‚</span>

<div class="paragraph"> </div>

   (å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“ä½ åœ¨.væ–‡ä»¶ä¸­çœ‹åˆ°"<span class="inlinecode">1</span> <span class="inlinecode">+</span> <span class="inlinecode">(2</span> <span class="inlinecode">::</span> <span class="inlinecode">[3])</span>"è¿™æ ·çš„è®°å·ä¼šæ„Ÿåˆ°éå¸¸ç–‘æƒ‘ã€‚æœ€é‡Œé¢çš„é‚£ä¸ªæ¡†ä½3çš„æ–¹æ‹¬å·ï¼ŒæŒ‡ç¤ºäº†å…¶æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯å¤–é¢é‚£ä¸ªæ–¹æ‹¬å·ï¼Œåœ¨HTMLä¸­æ˜¯çœ‹ä¸åˆ°çš„ï¼Œæ˜¯ç”¨æ¥å‘Šè¯‰"coqdoc"è¿™éƒ¨åˆ†è¦è¢«æ˜¾ç¤ºä¸ºä»£ç è€Œéæ™®é€šçš„æ–‡æœ¬ã€‚)

<div class="paragraph"> </div>

   ä¸Šé¢ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ª<span class="inlinecode"><span class="id" type="keyword">Notation</span></span>ç”³æ˜å¼•å…¥äº†æ ‡å‡†çš„æ–¹æ‹¬å·è®°å·æ¥è¡¨ç¤ºåˆ—è¡¨ï¼›ç¬¬ä¸‰ä¸ªå£°æ˜çš„å³è¾¹éƒ¨åˆ†å±•ç¤ºäº†åœ¨Coqä¸­ç”³æ˜nå…ƒè®°å·çš„è¯­æ³•ä»¥åŠå¦‚ä½•æŠŠå®ƒä»¬ç¿»è¯‘æˆåµŒå¥—çš„äºŒå…ƒæ„é€ å™¨çš„åºåˆ—ã€‚ 
<div class="paragraph"> </div>

<a name="lab68"></a><h3 class="section">Repeat</h3>
 å¾ˆå¤šæœ‰ç”¨çš„å‡½æ•°å¯ä»¥ç”¨æ¥æ“ä½œåˆ—è¡¨ã€‚æ¯”å¦‚<span class="inlinecode"><span class="id" type="tactic">repeat</span></span>å‡½æ•°æ¥å—ä¸€ä¸ªæ•°<span class="inlinecode"><span class="id" type="var">n</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">count</span></span>ï¼Œè¿”å›ä¸€ä¸ªé•¿ä¸º<span class="inlinecode"><span class="id" type="var">count</span></span>ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯<span class="inlinecode"><span class="id" type="var">n</span></span>çš„åˆ—è¡¨ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="tactic">repeat</span> (<span class="id" type="var">n</span> <span class="id" type="var">count</span> : <span class="id" type="var">nat</span>) : <span class="id" type="var">natlist</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">count</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">O</span> â‡’ <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">S</span> <span class="id" type="var">count'</span> â‡’ <span class="id" type="var">n</span> :: (<span class="id" type="tactic">repeat</span> <span class="id" type="var">n</span> <span class="id" type="var">count'</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab69"></a><h3 class="section">Length</h3>
 <span class="inlinecode"><span class="id" type="var">length</span></span>å‡½æ•°ç”¨æ¥è®¡ç®—åˆ—è¡¨çš„é•¿åº¦ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">length</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ <span class="id" type="var">O</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">S</span> (<span class="id" type="var">length</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab70"></a><h3 class="section">Append</h3>
 <span class="inlinecode"><span class="id" type="var">app</span></span>å‡½æ•°ç”¨æ¥æŠŠä¸¤ä¸ªåˆ—è¡¨è”æ¥èµ·æ¥ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">app</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l1</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span>    â‡’ <span class="id" type="var">l2</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">h</span> :: (<span class="id" type="var">app</span> <span class="id" type="var">t</span> <span class="id" type="var">l2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
å®é™…ä¸Šï¼Œåœ¨æ¥ä¸‹æ¥çš„å¾ˆå¤šåœ°æ–¹éƒ½ä¼šç”¨åˆ°<span class="inlinecode"><span class="id" type="var">app</span></span>ï¼Œæ‰€ä»¥å¦‚æœå®ƒæœ‰ä¸€ä¸ªä¸­ç¼€æ“ä½œç¬¦çš„è¯ä¼šå¾ˆæ–¹ä¾¿ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> "x ++ y" := (<span class="id" type="var">app</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">right</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app1</span>:             [1;2;3] ++ [4;5] = [1;2;3;4;5].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app2</span>:             <span class="id" type="var">nil</span> ++ [4;5] = [4;5].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_app3</span>:             [1;2;3] ++ <span class="id" type="var">nil</span> = [1;2;3].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
æˆ‘ä»¬æ¥çœ‹ä¸¤ä¸ªå°ä¾‹å­ï¼Œè¿™ä¸¤ä¸ªä¾‹å­éƒ½æ˜¯æœ‰å…³å¦‚ä½•ç¼–å†™æœ‰å…³åˆ—è¡¨çš„ç¨‹åºã€‚
    <span class="inlinecode"><span class="id" type="var">hd</span></span>å‡½æ•°è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆ"å¤´å…ƒç´ "ï¼‰ã€‚ç±»ä¼¼çš„ï¼Œ<span class="inlinecode"><span class="id" type="var">tl</span></span> è¿”å›é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä»¥å¤–
    çš„æ‰€æœ‰å…ƒç´ ã€‚
    å½“ç„¶ï¼Œç©ºåˆ—è¡¨æ²¡æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä¼ å…¥ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè®©è¿™ä¸ªå€¼æˆä¸ºè¿™ç§æƒ…å†µä¸‹çš„è¿”å›å€¼ã€‚  
<div class="paragraph"> </div>

<a name="lab71"></a><h3 class="section">Head (with default) and Tail</h3>

</div>
<div class="code code-space">
<span class="id" type="keyword">Definition</span> <span class="id" type="var">hd</span> (<span class="id" type="var">default</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ <span class="id" type="var">default</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">h</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">tl</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ <span class="id" type="var">nil</span>  <br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd1</span>:             <span class="id" type="var">hd</span> 0 [1;2;3] = 1.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd2</span>:             <span class="id" type="var">hd</span> 0 [] = 0.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_tl</span>:              <span class="id" type="var">tl</span> [1;2;3] = [2;3].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab72"></a><h4 class="section">Exercise: 2 stars (list_funs)</h4>
 å®Œæˆä»¥ä¸‹<span class="inlinecode"><span class="id" type="var">nonzeros</span></span>ï¼Œ<span class="inlinecode"><span class="id" type="var">oddmembers</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">countoddmembers</span></span>çš„å®šä¹‰ï¼Œ
    ä½ å¯ä»¥æŸ¥çœ‹æµ‹è¯•å‡½æ•°æ¥ç†è§£è¿™äº›å‡½æ•°åº”è¯¥åšä»€ä¹ˆ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">nonzeros</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_nonzeros</span>:            <span class="id" type="var">nonzeros</span> [0;1;0;2;3;0;0] = [1;2;3].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">oddmembers</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_oddmembers</span>:            <span class="id" type="var">oddmembers</span> [0;1;0;2;3;0;0] = [1;3].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">countoddmembers</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers1</span>:    <span class="id" type="var">countoddmembers</span> [1;0;3;1;4;5] = 4.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers2</span>:    <span class="id" type="var">countoddmembers</span> [0;2;4] = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_countoddmembers3</span>:    <span class="id" type="var">countoddmembers</span> <span class="id" type="var">nil</span> = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab73"></a><h4 class="section">Exercise: 3 stars, advanced (alternate)</h4>
 å®Œæˆ<span class="inlinecode"><span class="id" type="var">alternate</span></span>çš„å®šä¹‰ï¼Œå®ƒæŠŠä¸¤ä¸ªåˆ—è¡¨åƒæ‹‰é“¾ä¸€æ ·"æ‹‰"èµ·æ¥å¹¶æˆä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œ
    ä»ä¸¤ä¸ªåˆ—è¡¨ä¸­äº¤æ›¿åœ°å–å‡ºå…ƒç´ ã€‚æŸ¥çœ‹åé¢çš„testsæ¥è·å¾—æ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚

<div class="paragraph"> </div>

    æ³¨æ„ï¼šä¸€ç§è‡ªç„¶çš„ï¼Œä¼˜é›…çš„æ–¹æ³•æ¥ä¹¦å†™<span class="inlinecode"><span class="id" type="var">alternate</span></span>å°†æ— æ³•æ»¡è¶³Coqå¯¹äº<span class="inlinecode"><span class="id" type="keyword">Fixpoint</span></span>å¿…é¡»
    "æ˜¾ç„¶ä¼šç»ˆæ­¢"çš„è¦æ±‚ã€‚å¦‚æœä½ å‘ç°ä½ è¢«è¿™ç§è§£æ³•æŸç¼šä½äº†ï¼Œä½ å¯ä»¥å¯»æ‰¾ä¸€ç§ç¨å¾®å†—é•¿ä¸€äº›çš„è§£æ³•ï¼šåŒæ—¶è€ƒè™‘ä¸¤ä¸ªåˆ—è¡¨ã€‚ï¼ˆä¸€ä¸ªå¯è¡Œçš„è§£æ³•éœ€è¦å®šä¹‰æ–°çš„åˆ—è¡¨ï¼Œä½†è¿™ä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼‰ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">alternate</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate1</span>:        <span class="id" type="var">alternate</span> [1;2;3] [4;5;6] = [1;4;2;5;3;6].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate2</span>:        <span class="id" type="var">alternate</span> [1] [4;5;6] = [1;4;5;6].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate3</span>:        <span class="id" type="var">alternate</span> [1;2;3] [4] = [1;4;2;3].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_alternate4</span>:        <span class="id" type="var">alternate</span> [] [20;30] = [20;30].<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab74"></a><h2 class="section">Bags via Lists</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">bag</span></span>ï¼ˆæˆ–è€…å«<span class="inlinecode"><span class="id" type="var">multiset</span></span>ï¼‰å°±åƒä¸€ä¸ªé›†åˆï¼Œä½†æ˜¯æ¯ä¸ªå…ƒç´ éƒ½èƒ½å¤Ÿå‡ºç°è‹¥å¹²æ¬¡ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸€æ¬¡ã€‚
    èƒŒåŒ…ä¸€ç§åˆç†çš„å®ç°å°±æ˜¯æŠŠå®ƒä½œä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">bag</span> := <span class="id" type="var">natlist</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab75"></a><h4 class="section">Exercise: 3 stars (bag_functions)</h4>
 å®Œæˆä¸‹åˆ—<span class="inlinecode"><span class="id" type="var">count</span></span>, <span class="inlinecode"><span class="id" type="var">sum</span></span>, <span class="inlinecode"><span class="id" type="var">add</span></span> ä»¥åŠ <span class="inlinecode"><span class="id" type="var">member</span></span> çš„å®šä¹‰ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">count</span> (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">s</span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">nat</span> := <br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
</div>

<div class="doc">
è¿™äº›å‘½é¢˜éƒ½èƒ½é€šè¿‡<span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span>æ¥è¯æ˜ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_count1</span>:              <span class="id" type="var">count</span> 1 [1;2;3;1;4;1] = 3.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_count2</span>:              <span class="id" type="var">count</span> 6 [1;2;3;1;4;1] = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
å¤šé‡é›†çš„<span class="inlinecode"><span class="id" type="var">sum</span></span>éå¸¸åƒé›†åˆçš„<span class="inlinecode"><span class="id" type="var">union</span></span>:<span class="inlinecode"><span class="id" type="var">sum</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span> <span class="inlinecode"><span class="id" type="var">b</span></span>åŒ…å«äº†æ‰€æœ‰<span class="inlinecode"><span class="id" type="var">a</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">b</span></span>çš„å…ƒç´ ã€‚ï¼ˆæ•°å­¦ä¸Šå¯¹
    å¤šé‡é›†ä¸Šçš„<span class="inlinecode"><span class="id" type="var">sum</span></span>çš„å®šä¹‰å¸¸å¸¸ä¸å¤§ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªåå­—ã€‚
    å¯¹äº<span class="inlinecode"><span class="id" type="var">sum</span></span>æ¥è¯´ï¼Œæˆ‘ä»¬ç»™ä½ çš„å£°æ˜ä¸­å¹¶æ²¡æœ‰æ˜¾å¼çš„ç»™å‚æ•°æŒ‡æ´¾åå­—ã€‚é™¤æ­¤ä»¥å¤–ï¼Œå®ƒä½¿ç”¨<span class="inlinecode"><span class="id" type="keyword">Definition</span></span>
    è€Œä¸æ˜¯<span class="inlinecode"><span class="id" type="var">Fixpont</span></span>ï¼Œæ‰€ä»¥å³ä½¿ä½ ç»™å‚æ•°å®‰æ’äº†åå­—ï¼Œä½ ä¹Ÿä¸èƒ½é€’å½’çš„å¤„ç†ä»–ä»¬ã€‚ç»™å‡ºè¿™ä¸ªé—®é¢˜çš„æ„ä¹‰
    åœ¨äºé¼“åŠ±ä½ æ€è€ƒ<span class="inlinecode"><span class="id" type="var">sum</span></span>æ˜¯å¦èƒ½ç”¨å¦ä¸€ç§æ–¹æ³•å®ç°â€”â€”é€šè¿‡ä½¿ç”¨é‚£äº›ä½ å·²ç»å®šä¹‰è¿‡çš„å‡½æ•°ã€‚  
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">sum</span> : <span class="id" type="var">bag</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">bag</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">bag</span> := <br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_sum1</span>:              <span class="id" type="var">count</span> 1 (<span class="id" type="var">sum</span> [1;2;3] [1;4;1]) = 3.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">add</span> (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">s</span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">bag</span> := <br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_add1</span>:                <span class="id" type="var">count</span> 1 (<span class="id" type="var">add</span> 1 [1;4;1]) = 3.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_add2</span>:                <span class="id" type="var">count</span> 5 (<span class="id" type="var">add</span> 1 [1;4;1]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">member</span> (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">s</span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">bool</span> := <br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_member1</span>:             <span class="id" type="var">member</span> 1 [1;4;1] = <span class="id" type="var">true</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_member2</span>:             <span class="id" type="var">member</span> 2 [1;4;1] = <span class="id" type="var">false</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab76"></a><h4 class="section">Exercise: 3 stars, optional (bag_more_functions)</h4>
 ä½ å¯ä»¥æŠŠä¸‹é¢è¿™äº›å’Œ<span class="inlinecode"><span class="id" type="var">bag</span></span>æœ‰å…³çš„å‡½æ•°å½“åšé¢å¤–çš„ç»ƒä¹  
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">remove_one</span> (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">s</span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">bag</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;å½“<span class="inlinecode"><span class="id" type="var">remove_one</span></span>è¢«åº”ç”¨åˆ°ä¸€ä¸ªæ²¡æœ‰æ•°å¯ä»¥ç§»é™¤çš„èƒŒåŒ…æ—¶ï¼Œå®ƒåº”è¯¥è¿”å›åŸæ¥çš„é‚£ä¸ªè€Œä¸åšä»»ä½•æ”¹å˜ã€‚&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one1</span>:         <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;5;4;1]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one2</span>:         <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;4;1]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one3</span>:         <span class="id" type="var">count</span> 4 (<span class="id" type="var">remove_one</span> 5 [2;1;4;5;1;4]) = 2.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_one4</span>:         <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_one</span> 5 [2;1;5;4;5;1;4]) = 1.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">remove_all</span> (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">s</span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">bag</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all1</span>:          <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;5;4;1]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all2</span>:          <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;4;1]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all3</span>:          <span class="id" type="var">count</span> 4 (<span class="id" type="var">remove_all</span> 5 [2;1;4;5;1;4]) = 2.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_remove_all4</span>:          <span class="id" type="var">count</span> 5 (<span class="id" type="var">remove_all</span> 5 [2;1;5;4;5;1;4;5;1;4]) = 0.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">subset</span> (<span class="id" type="var">s<sub>1</sub></span>:<span class="id" type="var">bag</span>) (<span class="id" type="var">s<sub>2</sub></span>:<span class="id" type="var">bag</span>) : <span class="id" type="var">bool</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_subset1</span>:              <span class="id" type="var">subset</span> [1;2] [2;1;4;1] = <span class="id" type="var">true</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_subset2</span>:              <span class="id" type="var">subset</span> [1;2;2] [2;1;4;1] = <span class="id" type="var">false</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab77"></a><h4 class="section">Exercise: 3 stars (bag_theorem)</h4>
 å†™ä¸‹ä¸€ä¸ªä½ è®¤ä¸ºæœ‰è¶£çš„å…³äº<span class="inlinecode"><span class="id" type="var">bags</span></span>çš„å®šç†<span class="inlinecode"><span class="id" type="var">bag_theorem</span></span>ï¼Œè¦æ¶‰åŠåˆ°<span class="inlinecode"><span class="id" type="var">count</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">add</span></span>ã€‚
    è¯æ˜ä»–ã€‚æ³¨æ„ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å¼€æ”¾çš„ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ä¼šé‡åˆ°ä½ å†™ä¸‹äº†æ­£ç¡®çš„å®šç†ï¼Œ
    ä½†æ˜¯å…¶è¯æ˜æ¶‰åŠåˆ°äº†ä½ ç°åœ¨è¿˜æ²¡æœ‰å­¦åˆ°çš„æŠ€å·§ã€‚å¦‚æœä½ é™·å…¥éº»çƒ¦äº†ï¼Œæ¬¢è¿æé—®ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab78"></a><h1 class="section">æœ‰å…³åˆ—è¡¨çš„æ¨ç†</h1>

<div class="paragraph"> </div>

 å°±åƒæ•°å­—ä¸€æ ·ï¼Œä¸€äº›ç®€å•çš„æœ‰å…³å¤„ç†åˆ—è¡¨äº‹å®ï¼Œæœ‰æ—¶ä¹Ÿèƒ½ä»…ä»…é€šè¿‡åŒ–ç®€æ¥è¯æ˜ã€‚
    æ¯”æ–¹è¯´ï¼Œå¯¹äºä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œ<span class="inlinecode"><span class="id" type="tactic">reflexivity</span></span>ä¸­æ‰€åšçš„ç®€åŒ–å°±å·²ç»è¶³å¤Ÿäº†â€¦â€¦ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">nil_app</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;[] ++ <span class="id" type="var">l</span> = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
â€¦â€¦ç”±äº<span class="inlinecode">[]</span>è¢«æ›¿æ¢è¿›äº†<span class="inlinecode"><span class="id" type="var">app</span></span>å®šä¹‰ä¸­çš„ç›¸åº”çš„matchåˆ†æ”¯ï¼Œè¿™å°±ä½¿å¾—æ•´ä¸ª<span class="inlinecode"><span class="id" type="keyword">match</span></span>å¾—ä»¥è¢«ç®€åŒ–å¹¶è¯æ˜ç›®æ ‡ 
<div class="paragraph"> </div>

 å¹¶ä¸”ï¼Œå’Œæ•°ä¸€æ ·ï¼Œåˆæ˜¯å¯¹ä¸€ä¸ªåˆ—è¡¨åšåˆ†ç±»è®¨è®ºï¼ˆæ˜¯å¦æ˜¯ç©ºï¼‰æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">tl_length_pred</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">pred</span> (<span class="id" type="var">length</span> <span class="id" type="var">l</span>) = <span class="id" type="var">length</span> (<span class="id" type="var">tl</span> <span class="id" type="var">l</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">l</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;nil".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;cons&nbsp;n&nbsp;l'".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
è¿™é‡Œï¼Œå¦‚æ­¤è§£å†³<span class="inlinecode"><span class="id" type="var">nil</span></span>è¿™ç§æƒ…å†µæ˜¯å› ä¸ºæˆ‘ä»¬å®šä¹‰äº†<span class="inlinecode"><span class="id" type="var">tl</span></span> <span class="inlinecode"><span class="id" type="var">nil</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">nil</span></span>ã€‚è‡³äº<span class="inlinecode"><span class="id" type="tactic">destruct</span></span>ç­–ç•¥ä¸­çš„<span class="inlinecode"><span class="id" type="keyword">as</span></span>æ³¨è§£
    å¼•å…¥çš„ä¸¤ä¸ªåå­—ï¼Œ<span class="inlinecode"><span class="id" type="var">n</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">l'</span></span>ï¼Œ åˆ†åˆ«å¯¹åº”äº†<span class="inlinecode"><span class="id" type="var">cons</span></span>æ„é€ å­çš„ä¸¤ä¸ªå‚æ•°ï¼ˆæ­£åœ¨æ„é€ çš„åˆ—è¡¨çš„å¤´å’Œå°¾ï¼‰ã€‚ 
<div class="paragraph"> </div>

 é€šå¸¸çš„æƒ…å†µæ˜¯ï¼Œå°±ç®—ä½ ä¸ç›¸ä¿¡çš„è¯ä¹Ÿæ²¡åŠæ³•ï¼Œè¦è¯æ˜å…³äºåˆ—è¡¨çš„æœ‰è¶£çš„å®šç†éœ€è¦ç”¨åˆ°å½’çº³æ³•ã€‚ 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab79"></a><h2 class="section">ä¸€ç‚¹ç‚¹è¯´æ•™</h2>

<div class="paragraph"> </div>

 çŸ¥è¯†é˜…è¯»ç¤ºä¾‹è¯æ˜è„šæœ¬çš„è¯ï¼Œä½ ä¸ä¼šè·å¾—ä»€ä¹ˆç‰¹åˆ«æœ‰ç”¨çš„ä¸œè¥¿ã€‚ææ¸…æ¥šæ¯ä¸€ä¸ªçš„ç»†èŠ‚æ˜¯éå¸¸é‡è¦çš„
    ä½¿ç”¨Coqå¹¶æ€è€ƒæœ‰å…³æ¯ä¸€æ­¥æ˜¯å¦‚ä½•å¾—åˆ°çš„ã€‚å¦åˆ™ç»ƒä¹ é¢˜å°†ä¸€ç‚¹ç”¨éƒ½æ²¡æœ‰ã€‚ 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab80"></a><h2 class="section">åˆ—è¡¨ä¸Šçš„å½’çº³</h2>

<div class="paragraph"> </div>

 è¯»è€…å¯¹åœ¨åƒ<span class="inlinecode"><span class="id" type="var">natlist</span></span>è¿™æ ·çš„æ•°æ®ç±»å‹ä¸Šé€šè¿‡å½’çº³è¿›è¡Œè¯æ˜å’Œå¯¹è‡ªç„¶æ•°å½’çº³ç›¸æ¯”å¯èƒ½æ²¡æœ‰nameç†Ÿæ‚‰ï¼Œ
    ä½†æ˜¯åŸºæœ¬çš„æƒ³æ³•æ˜¯ä¸€æ ·ç®€å•çš„ã€‚æ¯ä¸ª<span class="inlinecode"><span class="id" type="keyword">Inductive</span></span>çš„å£°æ˜å®šä¹‰äº†ä¸€é›†å€¼ï¼Œè¿™äº›å€¼å¯ä»¥ç”¨é‚£äº›è¢«å£°æ˜
    çš„æ„é€ å™¨æ¥æ„å»ºï¼šå¸ƒå°”å€¼å¯ä»¥æ˜¯<span class="inlinecode"><span class="id" type="var">true</span></span>æˆ–è€…æ˜¯<span class="inlinecode"><span class="id" type="var">false</span></span>ï¼›è‡ªç„¶æ•°å¯ä»¥æ˜¯<span class="inlinecode"><span class="id" type="var">O</span></span>æˆ–<span class="inlinecode"><span class="id" type="var">S</span></span>åº”ç”¨åˆ°å¦ä¸€ä¸ªè‡ªç„¶æ•°ä¸Šï¼›
    åˆ—è¡¨å¯ä»¥æ˜¯<span class="inlinecode"><span class="id" type="var">nil</span></span>æˆ–è€…æ˜¯<span class="inlinecode"><span class="id" type="var">cons</span></span>åº”ç”¨åˆ°ä¸€ä¸ªè‡ªç„¶æ•°å’Œå¦ä¸€ä¸ªåˆ—è¡¨ã€‚

<div class="paragraph"> </div>

    é™¤æ­¤ä»¥å¤–ï¼ŒæŠŠå£°æ˜çš„æ„é€ å­åº”ç”¨åˆ°åˆ«çš„é¡¹ä¸Šé¢æ˜¯çš„å½’çº³å®šä¹‰çš„é¡¹çš„ <i>å”¯ä¸€_ å¯èƒ½çš„å½¢çŠ¶ï¼Œå¹¶ä¸”è¿™ä¸ªæ˜¯ä¸ªäº‹å®
    ç›´æ¥å°±ç»™å‡ºäº†ä¸€ç§ç”¨æ¥æ¨ç†å½’çº³å®šä¹‰é›†çš„æ–¹æ³•ï¼šä¸€ä¸ªè‡ªç„¶æ•°è¦ä¹ˆæ˜¯<span class="inlinecode"><span class="id" type="var">O</span></span>ä¸ç„¶å°±æ˜¯<span class="inlinecode"><span class="id" type="var">S</span></span>åº”ç”¨åˆ°æŸä¸ª <i>æ›´å°_ çš„
    è‡ªç„¶æ•°ï¼›ä¸€ä¸ªåˆ—è¡¨è¦ä¹ˆæ˜¯<span class="inlinecode"><span class="id" type="var">nil</span></span>ä¸ç„¶å°±æ˜¯<span class="inlinecode"><span class="id" type="var">cons</span></span>åº”ç”¨åˆ°æŸä¸ªè‡ªç„¶æ•°å’ŒæŸä¸ª <i>æ›´å°_ çš„åˆ—è¡¨ä¸Šï¼›ç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œ
    å¦‚æœæˆ‘ä»¬æœ‰æŸä¸ªå‘½é¢˜<span class="inlinecode"><span class="id" type="var">P</span></span>æåˆ°äº†åˆ—è¡¨<span class="inlinecode"><span class="id" type="var">l</span></span>å¹¶ä¸”æˆ‘ä»¬æƒ³è¯æ˜<span class="inlinecode"><span class="id" type="var">P</span></span>å¯¹ <i>ä¸€åˆ‡_ åˆ—è¡¨éƒ½æˆç«‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·æ¨ç†ï¼š

<div class="paragraph"> </div>

<ul class="doclist">
<li> é¦–å…ˆï¼Œè¯æ˜ <span class="inlinecode"><span class="id" type="var">P</span></span> å½“ <span class="inlinecode"><span class="id" type="var">l</span></span> æ˜¯ <span class="inlinecode"><span class="id" type="var">nil</span></span> æ—¶å¯¹ <span class="inlinecode"><span class="id" type="var">l</span></span> æˆç«‹ .

<div class="paragraph"> </div>


</li>
<li> ç„¶åè¯æ˜ <span class="inlinecode"><span class="id" type="var">P</span></span> å½“ <span class="inlinecode"><span class="id" type="var">l</span></span> æ˜¯ <span class="inlinecode"><span class="id" type="var">cons</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">l'</span></span>æˆç«‹ï¼Œ å…¶ä¸­ <span class="inlinecode"><span class="id" type="var">n</span></span> æ˜¯æŸä¸ªè‡ªç„¶æ•°ï¼Œ<span class="inlinecode"><span class="id" type="var">l'</span></span> æ˜¯æŸä¸ªæ›´å°çš„åˆ—è¡¨
        ï¼Œå‡è®¾ <span class="inlinecode"><span class="id" type="var">P</span></span> å¯¹ <span class="inlinecode"><span class="id" type="var">l'</span></span> æˆç«‹.

</li>
</ul>

<div class="paragraph"> </div>

    ç”±äºè¾ƒå¤§çš„åˆ—è¡¨åªå¯èƒ½é€šè¿‡è¾ƒå°çš„åˆ—è¡¨æ„å»ºèµ·æ¥ï¼Œæœ€ç»ˆè¿™ä¸ªè¾ƒå°çš„åˆ—è¡¨ä¼šå˜æˆ<span class="inlinecode"><span class="id" type="var">nil</span></span>ï¼Œè¿™ä¸¤ç‚¹åˆä¸€èµ·å°±å®Œæˆäº†
    <span class="inlinecode"><span class="id" type="var">P</span></span> å¯¹ä¸€åˆ‡åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span> æˆç«‹çš„è¯æ˜ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_assoc</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span> : <span class="id" type="var">natlist</span>, <br/>
&nbsp;&nbsp;(<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) ++ <span class="id" type="var">l3</span> = <span class="id" type="var">l1</span> ++ (<span class="id" type="var">l2</span> ++ <span class="id" type="var">l3</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">l1</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l1'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l1&nbsp;=&nbsp;nil".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l1&nbsp;=&nbsp;cons&nbsp;n&nbsp;l1'".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">IHl1'</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
å†ä¸€æ¬¡å¼ºè°ƒï¼Œå½“ä½ æŠŠCoqçš„è¯æ˜å½“åšé™æ€çš„æ–‡æ¡£çš„è¯ä½ å¯èƒ½ä¸ä¼šæœ‰ç‰¹åˆ«å¤šçš„æ”¶è·â€”â€”å¦‚æœä½ 
    é€šè¿‡ä¸€ä¸ªäº¤äº’å¼çš„Coqä¼šè¯æ¥é˜…è¯»è¯æ˜çš„è¯ä½ å¯ä»¥çœ‹åˆ°å½“å‰çš„ç›®æ ‡å’Œä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯è¿™äº›çŠ¶æ€
    å¯¹äºé˜…è¯»å†™ä¸‹æ¥çš„è„šæœ¬çš„ä½ æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚æ‰€ä»¥ä¸€ä»½ç”¨è‡ªç„¶è¯­è¨€å†™æˆçš„è¯æ˜â€”â€”å†™ç»™äººçœ‹çš„â€”â€”ä¼š
    éœ€è¦åŒ…å«æ›´å¤šåœ°æç¤ºï¼Œæ¯”å¦‚æé†’ä»–ä»¬ç¬¬äºŒç§æƒ…å†µä¸‹çš„å½’çº³å‡è®¾åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæ¥å¸®åŠ©è¯»è€…æ˜ç™½å½“å‰çš„æƒ…å†µã€‚ 
<div class="paragraph"> </div>

<a name="lab81"></a><h3 class="section">éå½¢å¼åŒ–çš„ç‰ˆæœ¬</h3>

<div class="paragraph"> </div>

 <i>å®šç†_: å¯¹æ‰€æœ‰çš„åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l1</span></span>, <span class="inlinecode"><span class="id" type="var">l2</span></span>, å’Œ <span class="inlinecode"><span class="id" type="var">l3</span></span>ï¼Œ 
   <span class="inlinecode">(<span class="id" type="var">l1</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l2</span>)</span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l3</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode">++</span> <span class="inlinecode">(<span class="id" type="var">l2</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" type="var">l3</span>)</span>ã€‚

<div class="paragraph"> </div>

   <i>è¯æ˜_: é€šè¿‡å¯¹ <span class="inlinecode"><span class="id" type="var">l1</span></span> ä½¿ç”¨å½’çº³æ³•ã€‚

<div class="paragraph"> </div>

<ul class="doclist">
<li> é¦–å…ˆ, å‡è®¾ <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span>ã€‚  æˆ‘ä»¬è¦è¯æ˜ï¼š
       (<font size=-2>&#9744;</font> ++ l2) ++ l3 = <font size=-2>&#9744;</font> ++ (l2 ++ l3),
     è¿™å¯ä»¥é€šè¿‡å±•å¼€ <span class="inlinecode">++</span> çš„å®šä¹‰å¾—åˆ°.

<div class="paragraph"> </div>


</li>
<li> ç„¶å, å‡è®¾ <span class="inlinecode"><span class="id" type="var">l1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n</span>::<span class="id" type="var">l1'</span></span>ï¼Œ æœ‰ï¼š
       (l1' ++ l2) ++ l3 = l1' ++ (l2 ++ l3)
     (å½’çº³å‡è®¾)ã€‚ æˆ‘ä»¬å¿…é¡»è¯æ˜
       ((n :: l1') ++ l2) ++ l3 = (n :: l1') ++ ç”¨æ¥å¼ºè°ƒç›®çš„æ˜¯ä¸€ä¸ªä¸é”™ æ ¹æ® <span class="inlinecode">++</span> çš„å®šä¹‰, ä¸Šé¢å°±ç­‰ä»·äºï¼š
       n :: ((l1' ++ l2) ++ l3) = n :: (l1' ++ (l2 ++ l3)),
     è¿™å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„å½’çº³å‡è®¾ç«‹é©¬å¾—åˆ°ã€‚  <font size=-2>&#9744;</font>

</li>
</ul>

<div class="paragraph"> </div>

<a name="lab82"></a><h3 class="section">å¦ä¸€ä¸ªä¾‹å­</h3>

<div class="paragraph"> </div>

  è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨æ¥åœ¨è¯¾å ‚ä¸Šä¸€èµ·å®Œæˆçš„ç±»ä¼¼çš„ä¾‹å­ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_length</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = (<span class="id" type="var">length</span> <span class="id" type="var">l1</span>) + (<span class="id" type="var">length</span> <span class="id" type="var">l2</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;WORKED&nbsp;IN&nbsp;CLASS&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l1</span> <span class="id" type="var">l2</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">l1</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l1'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l1&nbsp;=&nbsp;nil".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l1&nbsp;=&nbsp;cons".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">IHl1'</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab83"></a><h3 class="section">åè½¬åˆ—è¡¨</h3>
 ä½œä¸ºä¸€ä¸ªæ›´ä¸ºæ·±å…¥çš„ä¾‹å­ï¼Œæ¥è¯´æ˜åœ¨åˆ—è¡¨ä¸Šä½¿ç”¨å½’çº³è¯æ˜ï¼Œå‡è®¾æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª"å³ä¾§cons"çš„å‡½æ•°
    <span class="inlinecode"><span class="id" type="var">snoc</span></span>ã€‚ åƒè¿™æ ·ï¼š 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">snoc</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) (<span class="id" type="var">v</span>:<span class="id" type="var">nat</span>) : <span class="id" type="var">natlist</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span>    â‡’ [<span class="id" type="var">v</span>]<br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">h</span> :: (<span class="id" type="var">snoc</span> <span class="id" type="var">t</span> <span class="id" type="var">v</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
â€¦â€¦ç„¶åç”¨å®ƒæ¥å®šä¹‰ä¸€ä¸ªåè½¬åˆ—è¡¨çš„å‡½æ•°<span class="inlinecode"><span class="id" type="var">rev</span></span> åƒè¿™æ ·: 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">rev</span> (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natlist</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span>    â‡’ <span class="id" type="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">h</span> :: <span class="id" type="var">t</span> â‡’ <span class="id" type="var">snoc</span> (<span class="id" type="var">rev</span> <span class="id" type="var">t</span>) <span class="id" type="var">h</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_rev1</span>:            <span class="id" type="var">rev</span> [1;2;3] = [3;2;1].<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_rev2</span>:            <span class="id" type="var">rev</span> <span class="id" type="var">nil</span> = <span class="id" type="var">nil</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab84"></a><h3 class="section">æœ‰å…³åè½¬çš„è¯æ˜</h3>
 ç°åœ¨æˆ‘ä»¬ç”¨æˆ‘ä»¬æ–°å®šä¹‰çš„<span class="inlinecode"><span class="id" type="var">snoc</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">rec</span></span>æ¥è¯æ˜ä¸€äº›åˆ—è¡¨çš„å®šç†ã€‚
    ä¸æˆ‘ä»¬ç›®å‰å·²ç»è§åˆ°è¿‡çš„å½’çº³è¯æ˜ç›¸æ¯”ï¼Œæ‰‹å¤´è¿™ä¸ªæ˜¯ä¸€ä¸ªæ›´å…·æŒ‘æˆ˜æ€§
    çš„å®šç†ï¼šå°±æ˜¯åè½¬ä¸€ä¸ªåˆ—è¡¨å¹¶ä¸ä¼šæ”¹å˜ä»–çš„é•¿åº¦ã€‚å½“æˆ‘ä»¬åˆæ¬¡å°è¯•æ—¶
    æˆ‘ä»¬å‘ç°æˆ‘ä»¬å¡åœ¨äº†åç»§è¿™ç§æƒ…å½¢ä¸Šã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_length_firsttry</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">rev</span> <span class="id" type="var">l</span>) = <span class="id" type="var">length</span> <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">l</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;<span class="inlinecode"></span>".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;n&nbsp;::&nbsp;l'".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„æƒ…å†µã€‚æˆ‘ä»¬ä»æ™®é€šçš„åŒ–ç®€å¼€å§‹ã€‚&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;ç°åœ¨æˆ‘ä»¬å¥½åƒå¡åœ¨ä»€ä¹ˆåœ°æ–¹äº†ï¼šç›®æ ‡æ˜¯è¦è¯æ˜æ¶‰åŠ<span class="inlinecode"><span class="id" type="var">snoc</span></span>çš„ç­‰å¼ï¼Œ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½†æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸‹æ–‡å’Œå…¨å±€ç¯å¢ƒä¸‹å¹¶æ²¡æœ‰ä»»ä½•æœ‰å…³<span class="inlinecode"><span class="id" type="var">snoc</span></span>çš„ç­‰å¼ï¼<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€šè¿‡IHæ¥é‡å†™ç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä¸€ç‚¹ç‚¹è¿›å±•â€¦â€¦&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">IHl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;â€¦â€¦ä½†ä¹Ÿä»…æ­¤è€Œå·²&nbsp;*)</span><br/>
<span class="id" type="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
æ‰€ä»¥æˆ‘ä»¬æŠŠæœ‰å…³<span class="inlinecode"><span class="id" type="var">snoc</span></span>çš„å¯ä»¥æ¨åŠ¨è¯æ˜çš„ç­‰å¼å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªå¼•ç†ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">length_snoc</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n</span> : <span class="id" type="var">nat</span>, <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">snoc</span> <span class="id" type="var">l</span> <span class="id" type="var">n</span>) = <span class="id" type="var">S</span> (<span class="id" type="var">length</span> <span class="id" type="var">l</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">l</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n'</span> <span class="id" type="var">l'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;nil".*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;cons&nbsp;n'&nbsp;l'".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">IHl'</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
æ³¨æ„æˆ‘ä»¬è¦ä½¿å¾—å¼•ç†å°½å¯èƒ½çš„ <i>é€šç”¨_ : å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬è¦å¯¹ <i>æ‰€æœ‰_ çš„<span class="inlinecode"><span class="id" type="var">natlist</span></span>
    è¿›è¡Œå…¨ç§°é‡åŒ–ï¼Œè€Œä¸ä»…ä»…æ˜¯é‚£äº›ç”±<span class="inlinecode"><span class="id" type="var">rev</span></span>çš„æ¥çš„ã€‚è¿™å¾ˆè‡ªç„¶ï¼Œå› ä¸ºè¿™ä¸ªè¯æ˜ç›®æ ‡
    æ˜¾ç„¶ä¸ä¾èµ–äºè¢«åè½¬çš„åˆ—è¡¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯æ˜ä¸€ä¸ªæ›´æ™®éçš„æ€§è´¨æ›´å®¹æ˜“ã€‚ 
<div class="paragraph"> </div>

 ç°åœ¨æˆ‘ä»¬å¯ä»¥å®Œæˆæœ€åˆçš„é‚£ä¸ªè¯æ˜ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_length</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">length</span> (<span class="id" type="var">rev</span> <span class="id" type="var">l</span>) = <span class="id" type="var">length</span> <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">l</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">l'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;nil".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"l&nbsp;=&nbsp;cons".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">length_snoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">IHl'</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
ç”¨æ¥ä½œå¯¹æ¯”ï¼Œä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªå®šç†çš„éå½¢å¼åŒ–çš„è¯æ˜

<div class="paragraph"> </div>

    <i>å®šç†_: å¯¹ä¸€åˆ‡æ•°<span class="inlinecode"><span class="id" type="var">n</span></span>å’Œåˆ—è¡¨<span class="inlinecode"><span class="id" type="var">l</span></span>ï¼Œ
      <span class="inlinecode"><span class="id" type="var">length</span></span> <span class="inlinecode">(<span class="id" type="var">snoc</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode"><span class="id" type="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">S</span></span> <span class="inlinecode">(<span class="id" type="var">length</span></span> <span class="inlinecode"><span class="id" type="var">l</span>)</span>ã€‚

<div class="paragraph"> </div>

    <i>è¯æ˜_: å¯¹<span class="inlinecode"><span class="id" type="var">l</span></span>è¿›è¡Œå½’çº³ã€‚

<div class="paragraph"> </div>

<ul class="doclist">
<li> é¦–å…ˆï¼Œå‡è®¾<span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span>ã€‚æˆ‘ä»¬è¦è¯æ˜
       length (snoc <font size=-2>&#9744;</font> n) = S (length <font size=-2>&#9744;</font>)ï¼Œ
      é€šè¿‡<span class="inlinecode"><span class="id" type="var">length</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">snoc</span></span>çš„å®šä¹‰ï¼Œä¸Šå¼å¯ä»¥æ˜¾ç„¶å¾—åˆ°ã€‚

<div class="paragraph"> </div>


</li>
<li> æ¥ä¸‹æ¥ï¼Œå‡è®¾ <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n'</span>::<span class="id" type="var">l'</span></span>ï¼Œå¹¶ä¸”
        length (snoc l' n) = S (length l')ã€‚
      æˆ‘å¿…é¡»è¦è¯æ˜
        length (snoc (n' :: l') n) = S (length (n' :: l'))ã€‚
      é€šè¿‡<span class="inlinecode"><span class="id" type="var">length</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">snoc</span></span>ï¼Œåªè¦è¯æ˜
        S (length (snoc l' n)) = S (S (length l'))ï¼Œ
      è€Œè¿™å°±æ˜¯å½’çº³å‡è®¾ã€‚ <font size=-2>&#9744;</font> 
</li>
</ul>

<div class="paragraph"> </div>

 <i>å®šç†_: å¯¹ä¸€åˆ‡åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span>, <span class="inlinecode"><span class="id" type="var">length</span></span> <span class="inlinecode">(<span class="id" type="var">rev</span></span> <span class="inlinecode"><span class="id" type="var">l</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">length</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span>.

<div class="paragraph"> </div>

    <i>è¯æ˜_: å¯¹ <span class="inlinecode"><span class="id" type="var">l</span></span> è¿›è¡Œå½’çº³.  

<div class="paragraph"> </div>

<ul class="doclist">
<li> é¦–å…ˆï¼Œå‡è®¾<span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode">[]</span>ï¼Œæˆ‘ä»¬è¦è¯æ˜ï¼Œ
          length (rev <font size=-2>&#9744;</font>) = length <font size=-2>&#9744;</font>ã€‚
        é€šè¿‡<span class="inlinecode"><span class="id" type="var">length</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">rev</span></span>çš„å®šä¹‰ï¼Œä¸Šå¼å¯ä»¥æ˜¾ç„¶å¾—åˆ°ã€‚

<div class="paragraph"> </div>


</li>
<li> æ¥ä¸‹æ¥ï¼Œå‡è®¾ <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n'</span>::<span class="id" type="var">l'</span></span>ï¼Œå¹¶ä¸”
        length (rev l') = length l'ã€‚

</li>
</ul>
      æˆ‘å¿…é¡»è¦è¯æ˜
        length (rev (n' :: l')) = length (n' :: l')ã€‚
      é€šè¿‡<span class="inlinecode"><span class="id" type="var">rev</span></span>çš„å®šä¹‰ï¼Œåªè¦è¯æ˜
        length (snoc (rev l') n) = S (length l')
      æ ¹æ®ä¹‹å‰çš„å¼•ç†ï¼Œè¯´çš„å°±æ˜¯
        S (length (rev l)) = S (length l')ã€‚
      è€Œè¿™å°±æ˜¯å½’çº³å‡è®¾ã€‚ <font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 æ˜¾ç„¶ï¼Œè¿™äº›è¯æ˜çš„æ ·å¼å®åœ¨æ˜¯å†—é•¿è€Œè¿‚è…ã€‚ç»å†è¿‡æœ€å¼€å§‹çš„é‚£äº›ä»¥åï¼Œ
    æˆ‘ä»¬å¯èƒ½è§‰å¾—ç»†èŠ‚æ›´å°‘å¹¶ä¸”ä»…ä»…çªå‡ºé‚£äº›ä¸ååˆ†æ˜¾ç„¶çš„æ­¥éª¤çš„é‚£äº›è¯æ˜
    æ›´å®¹æ˜“ç†è§£ï¼ˆå› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿçš„åœ¨è„‘å­ä¸­æ€è€ƒä»–ä»¬ï¼Œå®åœ¨ä¸è¡Œæˆ‘ä»¬è¿˜
    å¯ä»¥åœ¨çº¸ä¸Šæ‰“è‰ç¨¿ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ç§æ›´åŠ ç´§å‡‘çš„æ ·å¼
    å‘ˆç°ä¹‹å‰çš„è¯æ˜ï¼š 
<div class="paragraph"> </div>

 <i>å®šç†_:
     å¯¹ä¸€åˆ‡åˆ—è¡¨ <span class="inlinecode"><span class="id" type="var">l</span></span>, <span class="inlinecode"><span class="id" type="var">length</span></span> <span class="inlinecode">(<span class="id" type="var">rev</span></span> <span class="inlinecode"><span class="id" type="var">l</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">length</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span>.

<div class="paragraph"> </div>

    <i>è¯æ˜_: é¦–å…ˆï¼Œæ³¨æ„åˆ°ï¼Œ
       length (snoc l n) = S (length l)
    å¯¹ä¸€åˆ‡<span class="inlinecode"><span class="id" type="var">l</span></span>æˆç«‹ã€‚ é€šè¿‡å¯¹<span class="inlinecode"><span class="id" type="var">l</span></span>è¿›è¡Œå½’çº³å°±å¯ä»¥ç›´æ¥å¾—åˆ°è¿™ä¸ªç»“è®ºã€‚
    å½“<span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">n'</span>::<span class="id" type="var">l'</span></span>æ—¶ï¼Œè¯æ˜æ€§è´¨åªéœ€è¦å†ä¸€æ¬¡ä½¿ç”¨å½’çº³æ³•ï¼Œç„¶å
    åŒæ—¶ä½¿ç”¨å½’çº³å‡è®¾å’Œä¹‹å‰çš„è§‚å¯Ÿå¾—åˆ°çš„æ€§è´¨ã€‚<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºå“ªç§æ ·å¼å–å†³äºè¯»è€…å¯¹äºè¿™ä¸ªé—®é¢˜
    äº†è§£ç¨‹åº¦ä»¥åŠå½“å‰è¯æ˜å’Œè¯»è€…å·²ç»äº†è§£çš„é‚£äº›æœ‰å¤šç›¸è¿‘ã€‚æ›´åŠ å†—é•¿
    çš„ç‰ˆæœ¬ç”¨æ¥å¼ºè°ƒè¯æ˜ç›®æ ‡æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å¼ã€‚ 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab85"></a><h2 class="section"><span class="inlinecode"><span class="id" type="var">SearchAbout</span></span></h2>

<div class="paragraph"> </div>

 æˆ‘ä»¬å·²ç»è§åˆ°äº†å¾ˆå¤šè¯æ˜éœ€è¦ä½¿ç”¨ä¹‹å‰å·²ç»è¯æ˜è¿‡çš„ç»“è®ºï¼Œç„¶åä½¿ç”¨<span class="inlinecode"><span class="id" type="tactic">rewrite</span></span>æ¥
    æ”¹å†™å½“å‰ç›®æ ‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçœ‹åˆ°å…¶ä»–ç”¨æ¥é‡ç”¨ä¹‹å‰è¯æ˜çš„å®šç†çš„æ–¹å¼ã€‚ä½†æ˜¯
    æƒ³è¦æŒ‡å®šä¸€ä¸ªå®šç†ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å…¶åå­—ï¼Œè®°ä½æ‰€æœ‰å®šç†çš„åå­—æ˜¯å¾ˆå›°éš¾çš„ï¼
    è®°ä½å“ªäº›å®šç†å·²ç»è¢«è¯æ˜è¿‡äº†ç”šè‡³éƒ½æ˜¯éå¸¸å›°éš¾çš„ï¼Œæ›´ä¸è¦è¯´è®°ä½å®ƒä»¬çš„åå­—äº†ã€‚

<div class="paragraph"> </div>

    Coqçš„<span class="inlinecode"><span class="id" type="var">SearchAbout</span></span>å‘½ä»¤åœ¨é‡åˆ°è¿™ç§æƒ…å†µçš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚ç”¨<span class="inlinecode"><span class="id" type="var">SearchAbout</span></span> <span class="inlinecode"><span class="id" type="var">foo</span></span>
    ä¼šè®©Coqæ˜¾ç¤ºæ‰€æœ‰æ¶‰åŠåˆ°<span class="inlinecode"><span class="id" type="var">foo</span></span>çš„å®šç†çš„åˆ—è¡¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå»æ‰ä¸‹é¢çš„æ³¨é‡Šä½ ä¼šçœ‹åˆ°
    ä¸€ä¸²æˆ‘ä»¬å·²ç»è¯æ˜è¿‡çš„å…³äº<span class="inlinecode"><span class="id" type="var">rev</span></span>çš„å®šç†ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;&nbsp;SearchAbout&nbsp;rev.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
åœ¨ä½ åšä¸‹é¢çš„ç»ƒä¹ æ—¶å’Œä¹‹åçš„è¯¾ç¨‹çš„è¿‡ç¨‹ä¸­ä½ è¦è®°ä½<span class="inlinecode"><span class="id" type="var">SearchAbout</span></span>ï¼›ä»–å¯ä»¥èŠ‚çº¦ä½ 
    éå¸¸å¤šçš„æ—¶é—´ï¼ 
<div class="paragraph"> </div>

 å¹¶ä¸”ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨ProofGeneralï¼Œä½ å¯ä»¥ç”¨<span class="inlinecode"><span class="id" type="var">C</span>-<span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">C</span>-<span class="id" type="var">a</span></span> <span class="inlinecode"><span class="id" type="var">C</span>-<span class="id" type="var">a</span></span>æ¥è¿è¡Œ<span class="inlinecode"><span class="id" type="var">SearchAbout</span></span>ã€‚
    é€šè¿‡<span class="inlinecode"><span class="id" type="var">C</span>-<span class="id" type="var">c</span></span> <span class="inlinecode"><span class="id" type="var">C</span>-;</span>å¯ä»¥åœ¨ä½ çš„ç¼“å†²åŒºé‡Œå‘ä¸‹ç¿»é˜…å®ƒè¿”å›çš„ç»“æœã€‚ 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab86"></a><h2 class="section">åˆ—è¡¨ç»ƒä¹ , ç¬¬ä¸€éƒ¨åˆ†</h2>

<div class="paragraph"> </div>

<a name="lab87"></a><h4 class="section">ç»ƒä¹ : ä¸‰æ˜Ÿ (list_exercises)</h4>
 æ›´å¤šçš„å…³äºåˆ—è¡¨çš„ä¹ é¢˜ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_nil_end</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">l</span> ++ [] = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">rev_involutive</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">rev</span> (<span class="id" type="var">rev</span> <span class="id" type="var">l</span>) = <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
ä¸‹ä¸€ä¸ªç»ƒä¹ æœ‰ä¸€ä¸ªéå¸¸çŸ­çš„è§£å†³æ–¹æ³•ã€‚å¦‚æœä½ å‘ç°è‡ªå·±å¼„å¾—ä¸€å›¢ç³Ÿï¼Œ
    ä½ åº”è¯¥å›å¤´å»æ‰¾æ‰¾æ›´ç®€å•çš„æ–¹æ³•ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">app_assoc4</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l1</span> <span class="id" type="var">l2</span> <span class="id" type="var">l3</span> <span class="id" type="var">l4</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">l1</span> ++ (<span class="id" type="var">l2</span> ++ (<span class="id" type="var">l3</span> ++ <span class="id" type="var">l4</span>)) = ((<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) ++ <span class="id" type="var">l3</span>) ++ <span class="id" type="var">l4</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">snoc_append</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) (<span class="id" type="var">n</span>:<span class="id" type="var">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">snoc</span> <span class="id" type="var">l</span> <span class="id" type="var">n</span> = <span class="id" type="var">l</span> ++ [<span class="id" type="var">n</span>].<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">distr_rev</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">rev</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = (<span class="id" type="var">rev</span> <span class="id" type="var">l2</span>) ++ (<span class="id" type="var">rev</span> <span class="id" type="var">l1</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
å…³äºä½ çš„<span class="inlinecode"><span class="id" type="var">nonzeros</span></span>å®ç°çš„ä¹ é¢˜ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">nonzeros_app</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">nonzeros</span> (<span class="id" type="var">l1</span> ++ <span class="id" type="var">l2</span>) = (<span class="id" type="var">nonzeros</span> <span class="id" type="var">l1</span>) ++ (<span class="id" type="var">nonzeros</span> <span class="id" type="var">l2</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab88"></a><h4 class="section">ç»ƒä¹ : ä¸¤æ˜Ÿ (beq_natlist)</h4>
 å¡«å†™<span class="inlinecode"><span class="id" type="var">beq_natlist</span></span>çš„å®šä¹‰ï¼Œå®ƒé€šè¿‡æ¯”è¾ƒåˆ—è¡¨ä¸­çš„æ•°å­—æ¥åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ã€‚è¯æ˜å¯¹ä¸€åˆ‡åˆ—è¡¨<span class="inlinecode"><span class="id" type="var">l</span></span>ï¼Œ
    <span class="inlinecode"><span class="id" type="var">beq_natlist</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span> è¿”å› <span class="inlinecode"><span class="id" type="var">true</span></span>ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">beq_natlist</span> (<span class="id" type="var">l1</span> <span class="id" type="var">l2</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">bool</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_beq_natlist1</span> :   (<span class="id" type="var">beq_natlist</span> <span class="id" type="var">nil</span> <span class="id" type="var">nil</span> = <span class="id" type="var">true</span>).<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_beq_natlist2</span> :   <span class="id" type="var">beq_natlist</span> [1;2;3] [1;2;3] = <span class="id" type="var">true</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_beq_natlist3</span> :   <span class="id" type="var">beq_natlist</span> [1;2;3] [1;2;4] = <span class="id" type="var">false</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">beq_natlist_refl</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">true</span> = <span class="id" type="var">beq_natlist</span> <span class="id" type="var">l</span> <span class="id" type="var">l</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab89"></a><h2 class="section">åˆ—è¡¨ç»ƒä¹ , ç¬¬äºŒéƒ¨åˆ†</h2>

<div class="paragraph"> </div>

<a name="lab90"></a><h4 class="section">ç»ƒä¹ : ä¸¤æ˜Ÿ (list_design)</h4>
 è®¾è®¡ç»ƒä¹ ï¼š

<div class="paragraph"> </div>

<ul class="doclist">
<li> å†™ä¸‹ä¸€ä¸ªä¸å¹³å‡¡çš„ï¼Œæ¶‰åŠåˆ°<span class="inlinecode"><span class="id" type="var">cons</span></span>(<span class="inlinecode">::</span>)ï¼Œ<span class="inlinecode"><span class="id" type="var">snoc</span></span>ï¼Œ<span class="inlinecode"><span class="id" type="var">app</span></span>(<span class="inlinecode">++</span>)
      çš„å®šç†<span class="inlinecode"><span class="id" type="var">cons_snoc_app</span></span>ã€‚

</li>
<li> è¯æ˜å®ƒã€‚ 
</li>
</ul>

</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab91"></a><h4 class="section">ç»ƒä¹ : ä¸‰æ˜Ÿ, è¿›é˜¶ (bag_proofs)</h4>
 ä¸‹é¢æ˜¯å…³äºä½ ä¹‹å‰å¯¹äºèƒŒåŒ…çš„ä¸€äº›å®šä¹‰çš„å®šç†ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">count_member_nonzero</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">s</span> : <span class="id" type="var">bag</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">ble_nat</span> 1 (<span class="id" type="var">count</span> 1 (1 :: <span class="id" type="var">s</span>)) = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
ä¸‹é¢è¿™æ¡å…³äº<span class="inlinecode"><span class="id" type="var">ble_nat</span></span>çš„å¼•ç†åœ¨ä½ å®Œæˆä¸‹ä¸€ä¸ªè¯æ˜æ—¶å¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">ble_n_Sn</span> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" type="var">ble_nat</span> <span class="id" type="var">n</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>) = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n'</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"0".&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;"S&nbsp;n'".&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn'</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">remove_decreases_count</span>: <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">s</span> : <span class="id" type="var">bag</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">ble_nat</span> (<span class="id" type="var">count</span> 0 (<span class="id" type="var">remove_one</span> 0 <span class="id" type="var">s</span>)) (<span class="id" type="var">count</span> 0 <span class="id" type="var">s</span>) = <span class="id" type="var">true</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab92"></a><h4 class="section">ç»ƒä¹ : ä¸‰æ˜Ÿ, å¯é€‰ (bag_count_sum)</h4>
 å†™ä¸‹ä¸€ä¸ªæ¶‰åŠåˆ°<span class="inlinecode"><span class="id" type="var">count</span></span>å’Œ<span class="inlinecode"><span class="id" type="var">sum</span></span>çš„ï¼Œå…³äº<span class="inlinecode"><span class="id" type="var">bag_count_sum</span></span>çš„å®šç†ï¼Œå¹¶è¯æ˜ã€‚
</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab93"></a><h4 class="section">ç»ƒä¹ : å››æ˜Ÿ, è¿›é˜¶ (rev_injective)</h4>
 è¯æ˜<span class="inlinecode"><span class="id" type="var">rev</span></span>æ˜¯ä¸€ä¸ªå•å°„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ
      forall (l1 l2 : natlist), rev l1 = rev l2 -&gt; l1 = l2.
    æœ‰ä¸€ç§ç®€å•å’Œä¸€ç§å›°éš¾çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab94"></a><h1 class="section">å¯èƒ½çš„å¤±è´¥</h1>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">natoption</span></span>çš„ä¸€ç§ç”¨æ³•æ˜¯ç”¨æ¥ä»å‡½æ•°ä¸­è¿”å›"é”™è¯¯ç "ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ
    å‡è®¾æˆ‘ä»¬æƒ³è¦å†™ä¸€ä¸ªè¿”å›æŸä¸ªåˆ—è¡¨ç¬¬<span class="inlinecode"><span class="id" type="var">n</span></span>ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬è®©
    å®ƒçš„ç±»å‹æ˜¯<span class="inlinecode"><span class="id" type="var">nat</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">natlist</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">nat</span></span>ï¼Œé‚£ä¹ˆå½“åˆ—è¡¨è¿‡çŸ­çš„æ—¶å€™æˆ‘ä»¬
    ä»ç„¶å¿…é¡»è¦è¿”å›æŸä¸ªæ•°ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">index_bad</span> (<span class="id" type="var">n</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ 42  <span class="comment">(*&nbsp;arbitrary!&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> â‡’ <span class="id" type="keyword">match</span> <span class="id" type="var">beq_nat</span> <span class="id" type="var">n</span> <span class="id" type="var">O</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">true</span> â‡’ <span class="id" type="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">false</span> â‡’ <span class="id" type="var">index_bad</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>) <span class="id" type="var">l'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab95"></a><h3 class="section"> </h3>
 å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæˆ‘ä»¬è®©å®ƒçš„ç±»å‹æˆä¸º<span class="inlinecode"><span class="id" type="var">nat</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">natlist</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">natoption</span></span>ï¼Œ
    é‚£ä¹ˆå½“åˆ—è¡¨ä¸å¤Ÿé•¿æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½è¿”å›<span class="inlinecode"><span class="id" type="var">None</span></span>ï¼Œå½“åˆ—è¡¨æœ‰è¶³å¤Ÿçš„å…ƒç´ æ—¶è¿”å›<span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">a</span></span>ï¼Œ
    å…¶ä¸­<span class="inlinecode"><span class="id" type="var">a</span></span>å‡ºç°åœ¨åˆ—è¡¨çš„ç¬¬<span class="inlinecode"><span class="id" type="var">n</span></span>ä½ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">natoption</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">Some</span> : <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">natoption</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">None</span> : <span class="id" type="var">natoption</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">index</span> (<span class="id" type="var">n</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natoption</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ <span class="id" type="var">None</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> â‡’ <span class="id" type="keyword">match</span> <span class="id" type="var">beq_nat</span> <span class="id" type="var">n</span> <span class="id" type="var">O</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">true</span> â‡’ <span class="id" type="var">Some</span> <span class="id" type="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">false</span> â‡’ <span class="id" type="var">index</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>) <span class="id" type="var">l'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_index1</span> :    <span class="id" type="var">index</span> 0 [4;5;6;7]  = <span class="id" type="var">Some</span> 4.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_index2</span> :    <span class="id" type="var">index</span> 3 [4;5;6;7]  = <span class="id" type="var">Some</span> 7.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_index3</span> :    <span class="id" type="var">index</span> 10 [4;5;6;7] = <span class="id" type="var">None</span>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
è¿™ä¸ªä¾‹å­åŒæ ·æ˜¯å¯ä»¥ç”¨æ¥ä»‹ç»Coqè¯­è¨€çš„ä¸€ä¸ªå°ç‰¹æ€§â€”â€”æ¡ä»¶è¡¨è¾¾å¼â€¦â€¦ 
<div class="paragraph"> </div>

<a name="lab96"></a><h3 class="section"> </h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">index'</span> (<span class="id" type="var">n</span>:<span class="id" type="var">nat</span>) (<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) : <span class="id" type="var">natoption</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">nil</span> â‡’ <span class="id" type="var">None</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">a</span> :: <span class="id" type="var">l'</span> â‡’ <span class="id" type="keyword">if</span> <span class="id" type="var">beq_nat</span> <span class="id" type="var">n</span> <span class="id" type="var">O</span> <span class="id" type="keyword">then</span> <span class="id" type="var">Some</span> <span class="id" type="var">a</span> <span class="id" type="keyword">else</span> <span class="id" type="var">index'</span> (<span class="id" type="var">pred</span> <span class="id" type="var">n</span>) <span class="id" type="var">l'</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Coqçš„æ¡ä»¶è¯­å¥å°±å’Œå…¶ä»–è¯­è¨€ä¸­çš„ä¸€æ ·ï¼Œæ— éåŠ ä¸Šäº†ä¸€ç‚¹å°å°çš„æ¨å¹¿ã€‚ç”±äºå¸ƒå°”ç±»å‹
    ä¸æ˜¯å†…å»ºçš„ï¼Œäº‹å®ä¸Šï¼ŒCoqå…è®¸åœ¨ä»»æ„æœ‰ä¸¤ä¸ªæ„é€ å­çš„å½’çº³å®šä¹‰çš„ç±»å‹ä¸Šä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼ã€‚
    å½“è¡¨è¾¾å¼æ±‚å€¼åˆ°å½’çº³å®šä¹‰ä¸­çš„ç¬¬ä¸€ä¸ªæ„é€ å­æ—¶ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯çœŸçš„ï¼Œå½“å…¶è¢«æ±‚å€¼åˆ°ç¬¬äºŒä¸ª
    æ„é€ å­æ—¶ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯å‡çš„ã€‚ 
<div class="paragraph"> </div>

 ä¸‹é¢çš„å‡½æ•°ä»<span class="inlinecode"><span class="id" type="var">natoption</span></span>ä¸­å–å‡ºä¸€ä¸ª<span class="inlinecode"><span class="id" type="var">nat</span></span>ï¼Œåœ¨<span class="inlinecode"><span class="id" type="var">None</span></span>çš„æƒ…å†µä¸‹è¿”å›æä¾›çš„é»˜è®¤å€¼ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">option_elim</span> (<span class="id" type="var">d</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">o</span> : <span class="id" type="var">natoption</span>) : <span class="id" type="var">nat</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">o</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">Some</span> <span class="id" type="var">n'</span> â‡’ <span class="id" type="var">n'</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">None</span> â‡’ <span class="id" type="var">d</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab97"></a><h4 class="section">ç»ƒä¹ ï¼šä¸¤æ˜Ÿ (hd_opt)</h4>
 ä½¿ç”¨ç›¸åŒçš„æƒ³æ³•ï¼Œä¿®æ­£ä¹‹å‰çš„<span class="inlinecode"><span class="id" type="var">hd</span></span>å‡½æ•°æ¥ä½¿æˆ‘ä»¬ä¸éœ€è¦ä¸º<span class="inlinecode"><span class="id" type="var">nil</span></span>æä¾›ä¸€ä¸ªé»˜è®¤çš„å…ƒç´ ã€‚  
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">hd_opt</span> (<span class="id" type="var">l</span> : <span class="id" type="var">natlist</span>) : <span class="id" type="var">natoption</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_opt1</span> : <span class="id" type="var">hd_opt</span> [] = <span class="id" type="var">None</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_opt2</span> : <span class="id" type="var">hd_opt</span> [1] = <span class="id" type="var">Some</span> 1.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <span class="id" type="var">test_hd_opt3</span> : <span class="id" type="var">hd_opt</span> [5;6] = <span class="id" type="var">Some</span> 5.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab98"></a><h4 class="section">ç»ƒä¹ : ä¸€æ˜Ÿ, å¯é€‰ (option_elim_hd)</h4>
 è¿™ä¸ªç»ƒä¹ è®©ä½ æŠŠæ–°çš„<span class="inlinecode"><span class="id" type="var">hd_opt</span></span>å’Œæ—§çš„<span class="inlinecode"><span class="id" type="var">hd</span></span>è”ç³»èµ·æ¥ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">option_elim_hd</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">l</span>:<span class="id" type="var">natlist</span>) (<span class="id" type="var">default</span>:<span class="id" type="var">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">hd</span> <span class="id" type="var">default</span> <span class="id" type="var">l</span> = <span class="id" type="var">option_elim</span> <span class="id" type="var">default</span> (<span class="id" type="var">hd_opt</span> <span class="id" type="var">l</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab99"></a><h1 class="section">å­—å…¸</h1>

<div class="paragraph"> </div>

 ä½œä¸ºæœ€åä¸€ä¸ªæ¼”ç¤ºåœ¨Coqä¸­å¦‚ä½•å®šä¹‰åŸºç¡€çš„æ•°æ®ç»“æ„çš„ä¾‹å­ï¼Œè¿™é‡Œæ˜¯
    ä¸€ä¸ªç®€å•çš„<span class="inlinecode"><span class="id" type="var">dictionary</span></span>çš„å£°æ˜ï¼Œä½¿ç”¨æ•°ä½œä¸ºå…³é”®å­—å’Œå€¼
    ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå­—å…¸ä»£è¡¨äº†ä¸€ä¸ªæœ‰é™çš„ä»è‡ªç„¶æ•°åˆ°è‡ªç„¶æ•°çš„æ˜ å°„ã€‚ï¼‰ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <span class="id" type="var">Dictionary</span>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <span class="id" type="var">dictionary</span> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id" type="var">empty</span>  : <span class="id" type="var">dictionary</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">record</span> : <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">nat</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">dictionary</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">dictionary</span>.<br/>

<br/>
</div>

<div class="doc">
è¿™ä¸ªå£°æ˜å¯ä»¥è¢«è¯»ä½œï¼š"æœ‰ä¸¤ç§æ–¹å¼æ¥æ„é€ <span class="inlinecode"><span class="id" type="var">dictionary</span></span>ï¼šè¦ä¹ˆç”¨<span class="inlinecode"><span class="id" type="var">empty</span></span>
    æ¥æ„é€ ä¸€ä¸ªç©ºçš„å­—å…¸ï¼Œè¦ä¹ˆæŠŠ<span class="inlinecode"><span class="id" type="var">record</span></span>åº”ç”¨åˆ°é”®ï¼Œå€¼å’Œä¸€ä¸ªå·²ç»å­˜åœ¨çš„<span class="inlinecode"><span class="id" type="var">dictionary</span></span>
    æ¥æ„é€ ä¸€ä¸ªé™„åŠ äº†é”®å€¼çš„<span class="inlinecode"><span class="id" type="var">dictionary</span></span>"ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">insert</span> (<span class="id" type="var">key</span> <span class="id" type="var">value</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">d</span> : <span class="id" type="var">dictionary</span>) : <span class="id" type="var">dictionary</span> :=<br/>
&nbsp;&nbsp;(<span class="id" type="var">record</span> <span class="id" type="var">key</span> <span class="id" type="var">value</span> <span class="id" type="var">d</span>).<br/>

<br/>
</div>

<div class="doc">
è¿™é‡Œæ˜¯ä¸€ä¸ª<span class="inlinecode"><span class="id" type="var">find</span></span>å‡½æ•°ï¼Œå®ƒåœ¨ä¸€ä¸ª<span class="inlinecode"><span class="id" type="var">dictionary</span></span>æŸ¥æ‰¾ç»™å®šçš„é”®ã€‚å¦‚æœè¯¥é”®
    æ— æ³•è¢«æ‰¾åˆ°ï¼Œä»–å°±è¿”å›<span class="inlinecode"><span class="id" type="var">None</span></span>ï¼Œå¦åˆ™è¿”å›<span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">val</span></span>å…¶ä¸­<span class="inlinecode"><span class="id" type="var">val</span></span>æ˜¯å­—å…¸ä¸­
    è¯¥é”®æ‰€å¯¹åº”çš„ã€‚å¦‚æœåŒä¸€ä¸ªé”®è¢«æ˜ åˆ°å¤šä¸ªå€¼ï¼Œ<span class="inlinecode"><span class="id" type="var">find</span></span>å°±ä¼šè¿”å›å®ƒç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„ã€‚ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="var">find</span> (<span class="id" type="var">key</span> : <span class="id" type="var">nat</span>) (<span class="id" type="var">d</span> : <span class="id" type="var">dictionary</span>) : <span class="id" type="var">natoption</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">d</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">empty</span>         â‡’ <span class="id" type="var">None</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">record</span> <span class="id" type="var">k</span> <span class="id" type="var">v</span> <span class="id" type="var">d'</span> â‡’ <span class="id" type="keyword">if</span> (<span class="id" type="var">beq_nat</span> <span class="id" type="var">key</span> <span class="id" type="var">k</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">then</span> (<span class="id" type="var">Some</span> <span class="id" type="var">v</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> (<span class="id" type="var">find</span> <span class="id" type="var">key</span> <span class="id" type="var">d'</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab100"></a><h4 class="section">ç»ƒä¹ : ä¸€æ˜Ÿ (dictionary_invariant1)</h4>
 å®Œæˆä¸‹åˆ—è¯æ˜ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">dictionary_invariant1'</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">d</span> : <span class="id" type="var">dictionary</span>) (<span class="id" type="var">k</span> <span class="id" type="var">v</span>: <span class="id" type="var">nat</span>),<br/>
&nbsp;&nbsp;(<span class="id" type="var">find</span> <span class="id" type="var">k</span> (<span class="id" type="var">insert</span> <span class="id" type="var">k</span> <span class="id" type="var">v</span> <span class="id" type="var">d</span>)) = <span class="id" type="var">Some</span> <span class="id" type="var">v</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab101"></a><h4 class="section">ç»ƒä¹ : ä¸€æ˜Ÿ (dictionary_invariant2)</h4>
 å®Œæˆä¸‹åˆ—è¯æ˜ 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">dictionary_invariant2'</span> : <span style="font-family: arial;">&forall;</span>(<span class="id" type="var">d</span> : <span class="id" type="var">dictionary</span>) (<span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">o</span>: <span class="id" type="var">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" type="var">beq_nat</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> = <span class="id" type="var">false</span> <span style="font-family: arial;">&rarr;</span> <span class="id" type="var">find</span> <span class="id" type="var">m</span> <span class="id" type="var">d</span> = <span class="id" type="var">find</span> <span class="id" type="var">m</span> (<span class="id" type="var">insert</span> <span class="id" type="var">n</span> <span class="id" type="var">o</span> <span class="id" type="var">d</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">Dictionary</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">NatList</span>.<br/>

<br/>
</div>

<div class="doc">
 
</div>
<div class="code code-tight">

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a></div>

</div>

</body>
</html>